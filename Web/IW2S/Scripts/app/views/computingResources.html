<style>
  .green1 {
    background-color: #009999 !important;
  }

  .gray {
    background-color: #ccc !important;
  }

  #lineChartKeyword ~ div > button {
    display: block;
    border-radius: 0 4px 4px 0;
    margin-bottom: 23px;
    outline: none;
    color: #fff;
  }

  #keyWordsChart ~ div > button {
    float: left;
    border-radius: 0 4px 4px 0;
    margin-bottom: 8px;
    outline: none;
    color: #fff;
  }

  #selkuang {
    background: #099;
    position: absolute;
    width: 100px;
    height: 80px;
    top: 43px;
    color: #fff;
    display: none;
  }

  #selkuang span {
    display: block;
    height: 40px;
    line-height: 40px;
    text-align: center;
    cursor: pointer;
  }

  #selkuang span:hover {
    background: #12908b;
  }
</style>
<div id="iw2s-main">
  <div class="header-box">
    <div class="row">
      <div class="navbar-bg-top">
        <div class="navbar-content-box">
                    <span style="width:120px;float:left;padding-top:5px;">
                        <a href="" class="" ui-sref-active="active" ui-sref="home">
                        </a>
                    </span>
          <ul class="nav-hd cl" style="float:right;" id="userName">
            <li style="width:100px;">
              <a style="width: 100%; height: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"
                 href="" class="" ui-sref-active="active">{{ $root.LoginName}}</a>

              <div id="selkuang">
                <span ui-sref="changepwd"><i class="fa fa-gear"></i>&nbsp;修改密码</span>
                <span ng-click="off()"><i class="fa fa-sign-out"></i>&nbsp;安全退出</span>
              </div>
            </li>
          </ul>
          <ul class="nav-hd cl" style="float:right;" ng-if="showComputingResources">
            <li><a href="" ui-sref="home">首页</a></li>
            <li><a href="" class="active" ng-click="showAdmin()">资源管理</a></li>
            <li><a href="" ng-click="showUser()">用户管理</a></li>
          </ul>
          <ul class="nav-hd cl" style="float:right;" ng-if="showUserInfo">
            <li><a href="" ui-sref="home">首页</a></li>
            <li><a href="" ng-click="showAdmin()">资源管理</a></li>
            <li><a href="" class="active" ng-click="showUser()">用户管理</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
<div ng-if="showComputingResources">
  <div class="mt20 row wpl" style="width:1180px;margin-top:60px;">
    <div style="margin-top:10px;" id="dec_dashboard">
      <div class="col-xs-12 col-md-7 col-lg-7">
        <div class="row">
          <div class="col-xs-12 col-md-6 col-lg-6">
            <div class="panel panel-blue panel-widget  mr10">
              <div class="row no-padding bordershow">
                <div class="col-sm-3 col-lg-5 widget-left">
                  <i class="fa fa-users fa-3x"></i>
                </div>
                <div class="col-sm-9 col-lg-7 widget-right">
                  <div class="large">{{LineUsers}}</div>
                  <div class="text-muted">用户数</div>
                                <span class="label label-success">
                                    {{LineUsersB*100|number:1}}% <i class="fa fa-arrow-up"></i>
                                </span>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-md-6 col-lg-6">
            <div class="panel panel-orange panel-widget ml10 mr10">
              <div class="row no-padding bordershow">
                <div class="col-sm-3 col-lg-5 widget-left">
                  <i class="fa fa-user fa-3x"></i>
                </div>
                <div class="col-sm-9 col-lg-7 widget-right">
                  <div class="large">{{LineAvUsers}}</div>
                  <div class="text-muted">活跃用户数</div>
                                <span class="label label-success">
                                    {{LineAvUsersB*100|number:1}}% <i class="fa fa-arrow-up"></i>
                                </span>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-md-6 col-lg-6">
            <div class="row">
              <div class="col-xs-12 col-md-12 col-lg-12">
                <div class="panel panel-teal panel-widget  mr10">
                  <div class="row no-padding bordershow">
                    <div class="col-sm-3 col-lg-5 widget-left">
                      <i class="fa fa-file fa-3x"></i>
                    </div>
                    <div class="col-sm-9 col-lg-7 widget-right">
                      <div class="large">{{LineProjects}}</div>
                      <div class="text-muted">项目数</div>
                                        <span class="label label-success">
                                            {{LineProjectsB*100|number:1}}% <i class="fa fa-arrow-up"></i>
                                        </span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xs-12 col-md-12 col-lg-12">
                <div class="panel panel-red panel-widget  mr10">
                  <div class="row no-padding bordershow">
                    <div class="col-sm-3 col-lg-5 widget-left">
                      <i class="fa fa-file-text fa-3x"></i>
                    </div>
                    <div class="col-sm-9 col-lg-7 widget-right">
                      <div class="large">{{LineAvProjs}}</div>
                      <div class="text-muted">活跃项目数</div>
                                        <span class="label label-success">
                                            {{LineAvProjsB*100|number:1}}% <i class="fa fa-arrow-up"></i>
                                        </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-md-6 col-lg-6">
            <div class="panel panel-default">
              <div class="panel-body easypiechart-panel">
                            <span class="label label-success mr10">
                                {{LineLinksB+100|number:1}}% <i class="fa fa-arrow-up"></i>
                            </span>
                <h4 style=" margin:8px 0 8px;">总链接数</h4>

                <div class="easypiechart " id="easypiechart-blue" data-percent="92">
                  <div class="img-circle ">
                    <div class="img-circle2">{{LineLinks}}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xs-12 col-md-5 col-lg-5 pr0">
        <div class="quick-pie panel panel-default">
          <div class="panel-body">
            <div class=" text-center ">
              <div id="dash_pie_1" class="piechart row" data-percent="59">
                <div class="col-xs-10" style="width: 408px; height: 240px; border-right: 1px solid #ccc;"
                     id="keyWordsChart"></div>
                <div class="col-xs-2" style="padding:20px 0 0 0;">
                  <button type="button" class="btn btn-tea" ng-click="changPieChart('baidu')"
                          ng-class="{true: 'green1',false:'gray'}[status=='baidu']">百 度
                  </button>
                  <button type="button" class="btn btn-tea" ng-click="changPieChart('weibo')"
                          ng-class="{true: 'green1',false:'gray'}[status=='weibo']">微 博
                  </button>
                  <button type="button" class="btn btn-tea" ng-click="changPieChart('weixin')"
                          ng-class="{true: 'green1',false:'gray'}[status=='weixin']">微 信
                  </button>
                  <button type="button" class="btn btn-tea" ng-click="changPieChart('sougou')"
                          ng-class="{true: 'green1',false:'gray'}[status=='sougou']">搜 狗
                  </button>
                  <button type="button" class="btn btn-tea" ng-click="changPieChart('tupian')"
                          ng-class="{true: 'green1',false:'gray'}[status=='tupian']">搜 图
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <div class="col-lg-12 pl0 pr0" ng-if="false">
      <div class="main-panel">
        <div class="main-panel-title">
          <span class="main-panel-text active">当前数据统计</span>
          <a href="" title=""><i class="fa fa-minus"></i></a>
          <a href="" title=""><i class="fa fa-refresh" ng-click="GetLineChartDatasDay()"></i></a>
        </div>
        <div class="mt20 " style=" width: 90%; max-width: 1100px; margin: 0 auto;">
          <table class="table table-bordered table-hover images">
            <thead>
            <tr>
              <th>用户</th>
              <th>活跃用户</th>
              <th>项目</th>
              <th data-field="">活跃项目</th>
              <th data-field="">总关键词</th>
              <th data-field="">在搜关键词</th>
              <th data-field="">完成关键词</th>
              <th data-field="">等待关键词</th>
              <th data-field="">总链接</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <th>{{LineUsers}}</th>
              <th>{{LineAvUsers}}</th>
              <th>{{LineProjects}}</th>
              <th data-field="">{{LineAvProjs}}</th>
              <th data-field="">{{LineKeywords}}</th>
              <th data-field="">{{LineKwSearch}}</th>
              <th data-field="">{{LineKwComplete}}</th>
              <th data-field="">{{LineKwWait}}</th>
              <th data-field="">{{LineLinks}}</th>

            </tr>
            </tbody>
          </table>

        </div>
      </div>
    </div>

    <div class="row">

      <div class="col-lg-6">
        <div class="main-panel">
          <div class="main-panel-title">
            <span class="main-panel-text active">用户状况</span>
            <span style="font-size:11px;color:#808080">最近一月用户每天变化状况</span>
            <a href="" title=""><i class="fa fa-minus"></i></a>
            <a href="" title=""><i class="fa fa-refresh" ng-click="GetLineChart1()"></i></a>
          </div>
          <div class="row" style=" margin: 10px auto 0px auto;">
            <div class="col-lg-12" style="width: 560px; height:300px;" id="lineChartUser"></div>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="main-panel">
          <div class="main-panel-title">
            <span class="main-panel-text active">项目状况</span>
            <span style="font-size:11px;color:#808080">最近一月项目每天变化状况</span>
            <a href="" title=""><i class="fa fa-minus"></i></a>
            <a href="" title=""><i class="fa fa-refresh" ng-click="GetLineChart1()"></i></a>
          </div>
          <div class="row" style=" margin: 10px auto 0 auto;">
            <div class="col-lg-12" style="width: 560px; height: 300px; " id="lineChartProject"></div>
          </div>
        </div>
      </div>
      <div class="col-lg-12">
        <div class="main-panel">
          <div class="main-panel-title">
            <span class="main-panel-text active">链接搜索状况</span>
            <span style="font-size:11px;color:#808080">最近6小时链接每分钟变化状况</span>
            <a href="" title=""><i class="fa fa-minus"></i></a>
            <a href="" title=""><i class="fa fa-refresh" ng-click="GetLineChart2()"></i></a>
          </div>
          <div class="row" style=" margin: 10px auto 20px auto;">
            <div class="col-lg-12" style="width: 1100px; height: 320px; " id="lineChartLinks"></div>
          </div>
        </div>
      </div>
      <div class="col-lg-12">
        <div class="main-panel">
          <div class="main-panel-title">
            <span class="main-panel-text active">关键词搜索状况</span>
            <span style="font-size:11px;color:#808080">最近6小时关键词每分钟变化状况</span>
            <a href="" title=""><i class="fa fa-minus"></i></a>
            <a href="" title=""><i class="fa fa-refresh" ng-click="GetLineChart2()"></i></a>
          </div>
          <div class="row" style=" margin: 10px 0 20px 0;">
            <div class="col-lg-11" style="width:1000px; height: 400px; " id="lineChartKeyword"></div>
            <div class="col-lg-1" style="border-left: 1px solid #bbb; padding:60px 0 0 0;height:400px;">
              <button type="button" class="btn btn-tea" ng-click="changKeywordData('baidu')">百 度</button>
              <button type="button" class="btn " ng-click="changKeywordData('weibo')">微 博</button>
              <button type="button" class="btn " ng-click="changKeywordData('weixin')">微 信</button>
              <button type="button" class="btn " ng-click="changKeywordData('sougou')">搜 狗</button>
              <button type="button" class="btn " ng-click="changKeywordData('tupian')">搜 图</button>
            </div>
          </div>
        </div>
      </div>


    </div>

    <div class="col-lg-12 pr0 pl0">
      <div class="main-panel">
        <div class="main-panel-title">
          <span class="main-panel-text active">主机运行状态</span>
          <a href="" title=""><i class="fa fa-minus"></i></a>
          <a href="" title=""><i class="fa fa-refresh" ng-click="GetBotList()"></i></a>

          <form role="form" class="search-content-from" style="right:45px;">
            <div class="form-group search-content-input">
              <input type="text" class="form-control search-content" id="name8" placeholder="请输入关键词"
                     ng-model="botSearch2">
              <i class="fa fa-search"></i>
            </div>
          </form>
        </div>
        <div class="mt20 mb10" style=" width: 90%; max-width: 1100px; margin: 0 auto;">
          <table class="table  table-hover images">
            <thead>
            <tr>
              <th class="center-align">序号</th>
              <th data-field="">主机</th>
              <th data-field="">IP地址</th>
              <th data-field="">Bot编号</th>
              <th data-field="">Bot所属模块</th>
              <th data-field="" class="center-align">空闲</th>
              <th data-field="" class="center-align">忙碌</th>
              <th data-field="" class="center-align">脱机</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="x in GetBotListShow|filter:botSearch2">
              <td class="center-align">{{$index+1}}</td>
              <td>{{x.HostName}}</td>
              <td>{{x.IpAddress}}</td>
              <td>{{x.ProcessId}}</td>
              <td>{{x.BotType}}</td>
              <td class="center-align" style="color:#cacaca"><span class="fa fa-circle"
                                                                   ng-class="{0: 'green'}[x.Status]"></span>
              </td>
              <td class="center-align" style="color: #cacaca"><span class="fa fa-circle"
                                                                    ng-class="{1: 'orange' }[x.Status]"></span>
              </td>
              <td class="center-align" style="color: #cacaca"><span class="fa fa-circle"
                                                                    ng-class="{2: 'red'}[x.Status]"></span>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>
</div>

  <div class="mt20 row wpl" style="width:1180px;margin-top:60px;">
    <div class="main-panel">
      <div class="main-panel-title">
        <span class="main-panel-text active">用户列表</span>
        <a href="" title=""><i class="fa fa-minus"></i></a>
        <a href="" title=""><i class="fa fa-refresh" ng-click=""></i></a>

        <form role="form" class="search-content-from" style="right:75px;">
          <div class="form-group search-content-input">
            <input type="text" class="form-control search-content" placeholder="请输入关键词"
                   ng-model="userNameList">
            <i class="fa fa-search"></i>
          </div>
        </form>
      </div>
      <div class="main-panel-content" style="min-height:500px;max-height:none;">
        <div style="height:420px">
          <table class="table  table-hover">
            <thead>
            <tr>
              <td>序号</td>
              <td>用户名<span style="font-size:9px;">（可查看该用户项目）</span></td>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="(k,v) in userList1 | filter:userNameList">
              <td>{{k+1}}</td>
              <td><a href="" title="点击进入该账号" ng-click="jumpToUserResource(v._id,v.LoginName)">{{v.LoginName}}</a></td>
            </tr>
            </tbody>
          </table>
        </div>
        <ul class="pagination  pull-right" style="margin:0 50px 0 0;">
          <li>
            <a href="" ng-click="skipTo(1)">
              <span>&laquo;</span>
            </a>
          </li>
          <li>
            <a href="" ng-click="skipTo(fenyeNum2-1)">
              <span> &lt;</span>
            </a>
          </li>
          <li ng-click="skipTo(fenyeNum-2)">
            <a ng-class="{true: 'active',false: ''}[activeNum==1]"
               href="">{{fenyeNum-2}}</a>
          </li>
          <li ng-click="skipTo(fenyeNum-1)">
            <a ng-class="{true: 'active',false: ''}[activeNum==2]"
               href="">{{fenyeNum-1}}</a>
          </li>
          <li ng-click="skipTo(fenyeNum)">
            <a ng-class="{true: 'active',false: ''}[activeNum==3]"
               href="">{{fenyeNum}}</a>
          </li>
          <li ng-click="skipTo(fenyeNum+1)">
            <a ng-class="{true: 'active',false: ''}[activeNum==4]"
               href="">{{fenyeNum+1}}</a>
          </li>
          <li ng-click="skipTo(fenyeNum+2)">
            <a ng-class="{true: 'active',false: ''}[activeNum==5]"
               href="">{{fenyeNum+2}}</a>
          </li>
          <li>
            <a style="max-width: 100px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">当前页{{fenyeNum2}}</a>
          </li>
          <li>
            <input type="text" ng-model="data.num_1" placeholder="跳转至"/>
            <a href="" class="btn" ng-click="skipTo(data.num_1)">跳转</a>
          </li>
          <li>
            <a style="max-width: 100px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">共{{m}}页</a>
          </li>
          <li>
            <a href="" ng-click="skipTo(fenyeNum2-0+1)">
              <span> &gt;</span>
            </a>
          </li>
          <li>
            <a href="" ng-click="skipTo('lastPage')">
              <span>&raquo;</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<div class="mt20 row wpl" style="width:1180px;margin-top:60px;">
    <div class="main-panel">
        <div class="main-panel-title">
            <span class="main-panel-text active">用户列表</span>
            <a href="" title=""><i class="fa fa-minus"></i></a>
            <a href="" title=""><i class="fa fa-refresh" ng-click=""></i></a>

            <form role="form" class="search-content-from" style="right:75px;">
                <div class="form-group search-content-input">
                    <input type="text" class="form-control search-content" placeholder="请输入关键词"
                           ng-model="userNameList">
                    <i class="fa fa-search"></i>
                </div>
            </form>
        </div>
        <div class="main-panel-content" style="min-height:500px;max-height:none;">
            <div style="height:420px">
                <table class="table  table-hover">
                    <thead>
                        <tr>
                            <td>序号</td>
                            <td>用户名<span style="font-size:9px;">（可查看该用户项目）</span></td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="(k,v) in userList1 | filter:userNameList">
                            <td>{{k+1}}</td>
                            <td><a href="" title="点击进入该账号" ng-click="jumpToUserResource(v._id,v.LoginName)">{{v.LoginName}}</a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <ul class="pagination  pull-right" style="margin:0 50px 0 0;">
                <li>
                    <a href="" ng-click="skipTo(1)">
                        <span>&laquo;</span>
                    </a>
                </li>
                <li>
                    <a href="" ng-click="skipTo(fenyeNum2-1)">
                        <span> &lt;</span>
                    </a>
                </li>
                <li ng-click="skipTo(fenyeNum-2)">
                    <a ng-class="{true: 'active',false: ''}[activeNum==1]"
                       href="">{{fenyeNum-2}}</a>
                </li>
                <li ng-click="skipTo(fenyeNum-1)">
                    <a ng-class="{true: 'active',false: ''}[activeNum==2]"
                       href="">{{fenyeNum-1}}</a>
                </li>
                <li ng-click="skipTo(fenyeNum)">
                    <a ng-class="{true: 'active',false: ''}[activeNum==3]"
                       href="">{{fenyeNum}}</a>
                </li>
                <li ng-click="skipTo(fenyeNum+1)">
                    <a ng-class="{true: 'active',false: ''}[activeNum==4]"
                       href="">{{fenyeNum+1}}</a>
                </li>
                <li ng-click="skipTo(fenyeNum+2)">
                    <a ng-class="{true: 'active',false: ''}[activeNum==5]"
                       href="">{{fenyeNum+2}}</a>
                </li>
                <li>
                    <a style="max-width: 100px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">当前页{{fenyeNum2}}</a>
                </li>
                <li>
                    <input type="text" ng-model="data.num_1" placeholder="跳转至" />
                    <a href="" class="btn" ng-click="skipTo(data.num_1)">跳转</a>
                </li>
                <li>
                    <a style="max-width: 100px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">共{{m}}页</a>
                </li>
                <li>
                    <a href="" ng-click="skipTo(fenyeNum2-0+1)">
                        <span> &gt;</span>
                    </a>
                </li>
                <li>
                    <a href="" ng-click="skipTo('lastPage')">
                        <span>&raquo;</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>


<div ng-include="'Scripts/app/views/common/footer.html'"></div>

<script>
  $(function(){
    $('.fa-minus').click(function () {
      var cardContent = $(this).parent().parent().parent('.main-panel').children('.main-panel-content');
      if (cardContent.hasClass('active')) {
        $(this).addClass('fa-minus');
        $(this).removeClass('fa-plus');
        $(cardContent).removeClass('active');
      } else {
        $(this).removeClass('fa-minus');
        $(this).addClass('fa-plus');
        $(cardContent).addClass('active');
      }
      cardContent.toggle(500);
    })

    $("[data-toggle='tooltip']").tooltip();

    $('#lineChartKeyword ~ div > button').click(function () {
      $('#lineChartKeyword ~ div > button').removeClass('btn-tea');
      $(this).addClass('btn-tea');
    })
    $('#userName').mousemove(function () {
      $('#selkuang').css('display', 'block');
    })
    $('#userName').mouseout(function () {
      $('#selkuang').css('display', 'none');
    })
  })


</script>
