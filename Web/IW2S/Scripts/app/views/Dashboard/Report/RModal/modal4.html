<div id="modal4">
    <div class="M4_nei">
        <h4>
            传播影响力分析
        </h4>
    </div>
    <h5>1.链接监测概况</h5>
    <div class="HoverActiveYu" ng-class="{true:'HoverActive',false:''}[MouseOn==41&&keXiuGai]" ng-mouseover="MouseOnShow(41)" ng-mouseleave="MouseOnShow(0)">
        <div class="caozuo">
            <i class="fa fa-refresh" ng-click="GetLinkOverview(true)" style="font-size:16px;"></i>
            <i class="fa fa-pencil-square-o" ng-click="ChangeTJMS(3)"></i>
            <i class="fa fa-low-vision"></i>
        </div>
        <div class="M4tubia" style="position: relative; margin: 20px auto 0px auto;">
            <div class="row mr0 ml0 pr0 pl0">
                <div >
                    <div class="row pr20" style="height:350px;" ng-if="changeBig==1">
                        <div class="col-sm-6" style="height: 350px; position: absolute; z-index: 10; " ng-class="{1: '',2: 'col-sm-12',3:'col-sm-6'}[changeBig]">
                            <div class="change_big">
                                <i class="fa fa-arrows-alt" ng-if="changeBig==1" ng-click="ChangeBigFun(2,selectedTime)"></i>
                                <i class="fa fa-minus-square" ng-if="changeBig==2" ng-click="ChangeBigFun(1,selectedTime)"></i>
                            </div>
                            <div style=" height: 350px; width: 100%" id="D_lineChart"></div>
                        </div>
                        <div class=" col-sm-6 pr20 pl0" style="position: absolute; z-index: 10; right: 0; " ng-class="{1: '',2: 'col-sm-0',3:' col-sm-6'}[changeBig]">
                            <div class="change_big">
                                <i class="fa fa-arrows-alt" ng-if="changeBig==1" ng-click="ChangeBigFun(3,selectedTime)"></i>
                                <i class="fa fa-minus-square" ng-if="changeBig==3" ng-click="ChangeBigFun(1,selectedTime)"></i>
                            </div>
                            <div style=" height: 350px;width:100%" id="D_PieChart"></div>
                        </div>
                    </div>
                    <div class="row pr20" style="height:350px;" ng-if="changeBig==2">
                        <div class="col-sm-12" style="height: 350px; position: absolute; z-index: 100; ">
                            <div class="change_big">
                                <i class="fa fa-arrows-alt" ng-if="changeBig==1" ng-click="ChangeBigFun(2,selectedTime)"></i>
                                <i class="fa fa-minus-square" ng-if="changeBig==2" ng-click="ChangeBigFun(1,selectedTime)"></i>
                            </div>
                            <div style=" height: 350px; width: 100%" id="D_lineChart"></div>
                        </div>
                        <div class=" col-sm-0 pr20 pl0" style="position: absolute; z-index: 100; right: 0; " ng-show="false">
                            <div class="change_big">
                                <i class="fa fa-arrows-alt" ng-if="changeBig==1" ng-click="ChangeBigFun(3,selectedTime)"></i>
                                <i class="fa fa-minus-square" ng-if="changeBig==3" ng-click="ChangeBigFun(1,selectedTime)"></i>
                            </div>
                            <div style=" height: 350px;width:100%" id="D_PieChart"></div>
                        </div>
                    </div>
                    <div class="row pr20" style="height:350px;" ng-if="changeBig==3">
                        <div class="col-sm-4 pl15" style="height: 350px; position: absolute; z-index: 100; ">
                            <div class="change_big">
                                <i class="fa fa-arrows-alt" ng-if="changeBig==1" ng-click="ChangeBigFun(2,selectedTime)"></i>
                                <i class="fa fa-minus-square" ng-if="changeBig==2" ng-click="ChangeBigFun(1,selectedTime)"></i>
                            </div>
                            <div style=" height: 350px; width: 100%" id="D_lineChart"></div>
                        </div>
                        <div class=" col-sm-8 pr20 pl0" style="position: absolute; z-index: 100; right: 0; ">
                            <div class="change_big">
                                <i class="fa fa-arrows-alt" ng-if="changeBig==1" ng-click="ChangeBigFun(3,selectedTime)"></i>
                                <i class="fa fa-minus-square" ng-if="changeBig==3" ng-click="ChangeBigFun(1,selectedTime)"></i>
                            </div>
                            <div style=" height: 350px;width:100%" id="D_PieChart"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div >
                <div class="row" style="padding:20px 3% 0;height:400px; border-top:1px solid #eee;">
                    <div class="row"ng-if="false">
                        <div class="col-sm-6">
                            <a href="" class="btn btn-xs btn-tea">链接详情</a>
                            <!--<a href="" ng-click="changeLink()" class="btn btn-xs">自动摘要</a>-->
                        </div>
                        <div class="col-sm-6">
                            <div class="input-group">
                                <div class="input-group-addon">按发表时间搜索</div>
                                <input type="text" ng-model="data.searchTime" class="form-control" placeholder="如：2016-01-01">
                                <span class="input-group-btn">
                                    <button class="btn btn-tea" type="button" ng-click="searchLinkByTime(data.searchTime)">
                                        搜索
                                    </button>
                                </span>
                            </div>
                        </div>

                    </div>
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th style="width:100px;">发表时间</th>
                                <th>网站</th>
                                <th>标题</th>
                                <th style="width:200px;">关键词</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="x in TimeLinkList1">
                                <th style="font-weight:normal">{{x.PublishTime| date:'yyyy-MM-dd'}}</th>
                                <th>
                                    <a style=" font-weight: 600; color: #099;" target="_blank" href={{ "http://" +x.domain}} title={{x.Domain}}>
                                        {{x.Domain.length>15?
                                        ((x.Domain | limitTo:12)+"...") : x.Domain }}
                                    </a>
                                </th>
                                <th>
                                    <a style="font-weight: 600; color: #099;" target="_blank" href={{x.LinkUrl}} title={{x.Title}}>
                                        {{x.Title.length>22?
                                        ((x.Title | limitTo:21)+"...") : x.Title }}
                                    </a>
                                </th>
                                <td title={{x.Keywords}}>
                                    {{x.Keywords.length>13? ((x.Keywords | limitTo:12)+"...") : x.Keywords }}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <ul class="pagination  pull-right" style="margin:0px 50px 0 0;">
                    <li>
                        <a href="" ng-click="skipTo(1)">
                            <span>&laquo;</span>
                        </a>
                    </li>
                    <li>
                        <a href="" ng-click="skipTo(fenyeNum2-1)">
                            <span> &lt;</span>
                        </a>
                    </li>
                    <li ng-click="skipTo(fenyeNum-2)">
                        <a ng-class="{true: 'active',false: ''}[activeNum==1]" href="">{{fenyeNum-2}}</a>
                    </li>
                    <li ng-click="skipTo(fenyeNum-1)" ng-show="m>1">
                        <a ng-class="{true: 'active',false: ''}[activeNum==2]" href="">{{fenyeNum-1}}</a>
                    </li>
                    <li ng-click="skipTo(fenyeNum)" ng-show="m>2">
                        <a ng-class="{true: 'active',false: ''}[activeNum==3]" href="">{{fenyeNum}}</a>
                    </li>
                    <li ng-click="skipTo(fenyeNum+1)" ng-show="m>3">
                        <a ng-class="{true: 'active',false: ''}[activeNum==4]" href="">{{fenyeNum+1}}</a>
                    </li>
                    <li ng-click="skipTo(fenyeNum+2)" ng-show="m>4">
                        <a ng-class="{true: 'active',false: ''}[activeNum==5]" href="">{{fenyeNum+2}}</a>
                    </li>
                    <li>
                        <a style="max-width: 100px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">当前页{{fenyeNum2}}</a>
                    </li>
                    <li>
                        <input type="text" ng-model="data.num_1" placeholder="跳转至" style=" height: 34px; margin-left: -1px; " />
                        <a href="" class="btn" ng-click="skipTo(data.num_1)">跳转</a>
                    </li>
                    <li>
                        <a style="max-width: 100px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">共{{m}}页</a>
                    </li>
                    <li>
                        <a href="" ng-click="skipTo(fenyeNum2-0+1)">
                            <span> &gt;</span>
                        </a>
                    </li>
                    <li>
                        <a href="" ng-click="skipTo('lastPage')">
                            <span>&raquo;</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="mb10"style="margin-top: 50px;">
            <div class="mt10" ng-show="ChangeTJMSShow==0&&GetLinkOverviewData.Description">
                {{GetLinkOverviewData.Description}}
            </div>
            <div ng-show="ChangeTJMSShow==0&&!GetLinkOverviewData.Description">
                <div class="addMS">
                    <div class="nei_TJMS" ng-click="ChangeTJMS(3)" ng-show="keXiuGai">
                        <i class="fa fa-plus-square mr5"></i>添加描述
                    </div>
                    <div class="nei_TJMS_no" ng-show="!keXiuGai">
                        <i class="fa fa-plus-square mr5"></i>您尚未添加描
                    </div>
                </div>
            </div>
            <div class="mt10" ng-show="ChangeTJMSShow==3">
                <textarea class="form-control" rows="3" placeholder="请输入链接监测概况描述" ng-model="model2.JCGKdescription"></textarea>
                <div id="caozuoBut">
                    <button type="button" class="btn btn-primary queren" ng-click="UpdateLinkOverview()">修改</button>
                    <button type="button" class="btn btn-default quxiao" ng-click="ChangeTJMS(0)">取消</button>
                </div>
            </div>
        </div>
    </div>
    <h5 style="font-weight:600;">2.事件分析</h5>

    <div class="HoverActiveYu" ng-repeat="x in GetLinkChartCateData track by x._id" ng-init="outerIndex = $index + 1" ng-class="{true:'HoverActive',false:''}[MouseOn==(42+outerIndex*400)&&keXiuGai]" ng-mouseover="MouseOnShow(42+outerIndex*400)" ng-mouseleave="MouseOnShow(0)">
        <div class="caozuo">
            <i class="fa fa-refresh" ng-click="GetLinkOverview(true)" style="font-size:16px;"></i>
            <i class="fa fa-pencil-square-o" ng-click="ChangeTJMS(outerIndex+400)"></i>
            <i class="fa fa-trash-o" ng-click="DelLinkChartCate(x._id)"> </i>
        </div>
        <h5>2.{{outerIndex}}{{x.Title}}</h5>
        <div ng-bind-html="x.Description|htmlContent" style="overflow: auto"></div>
        <!---->
        <div style="margin:5px 20px;z-index:5 ;background-color:#fff;" ng-repeat="y in x.LinkChartList track by y._id">
            <div style="background-color: #fff; " class="HoverActiveYu " ng-class="{true:'HoverActive2',false:''}[keXiuGai]">
                <div class="caozuo2">
                    <!--<i class="fa fa-refresh" ng-click="GetKeywordChart(true)"></i>-->
                    <i class="fa fa-pencil-square-o" ng-click="ChangeTJMS2(4600+$index+outerIndex*10000,y)"></i>
                    <i class="fa fa-trash-o" ng-click="DelLinkChart(y._id)"></i>
                </div>
                <div class="mb10 ">
                    <div class="mt10 mb10" ng-show="ChangeTJMSShow2!=(4600+$index+outerIndex*10000)">{{y.Title}}</div>
                    <div style="margin:30px 30px 10px" ng-show="ChangeTJMSShow2==(4600+$index+outerIndex*10000)">
                        <div class="mt10" ng-show="ChangeTJMSShow2=={{4600+$index+outerIndex*10000}}">
                            <input class="form-control" placeholder="请输入要修改的标题" ng-model="model2.LinkChartListIpTitle">
                        </div>
                    </div>
                    <div>
                        <div style=" height: 300px; width: 100%" id="{{'D_lineChart'+($index+4200+outerIndex*10000)}}" ng-show="y.CharyType==1"></div>
                        <div style=" height: 300px; width: 100%" id="{{'D_pieChart'+($index+4200+outerIndex*10000)}}" ng-show="y.CharyType==2"></div>
                    </div>
                    <div ng-show="ChangeTJMSShow2!=(4600+$index+outerIndex*10000)">{{y.Description}}</div>
                    <div style="margin: 5px 30px 10px;" ng-show="ChangeTJMSShow2=={{4600+$index+outerIndex*10000}}">
                        <textarea class="form-control" rows="3" placeholder="请输入采集统计概览描述" ng-model="model2.LinkChartListIpDescription"></textarea>
                        <div id="caozuoBut">
                            <button type="button" class="btn btn-primary queren" ng-click="UpdateLinkChart(y._id)">修改</button>
                            <button type="button" class="btn btn-default quxiao" ng-click="ChangeTJMS2(0,null)">取消</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div style="margin:5px 20px;z-index:5" ng-repeat="y in x.DomainChartList track by y._id">
            <div class="HoverActiveYu" style="background-color: #fff; " ng-class="{true:'HoverActive2',false:''}[keXiuGai]">
                <div class="caozuo2">
                    <!--   <i class="fa fa-refresh" ng-click="GetKeywordChart(true)"></i>-->
                    <i class="fa fa-pencil-square-o" ng-click="ChangeTJMS2(4800+$index+outerIndex*10000,y)"></i>
                    <i class="fa fa-trash-o" ng-click="DelDomainChart(y._id)"></i>
                </div>
                <div class="mb10 ">
                    <div class="mt10 mb10" ng-show="ChangeTJMSShow2!=(4800+$index+outerIndex*10000)">{{y.Title}}</div>
                    <div style="margin:30px 30px 10px" ng-show="ChangeTJMSShow2==(4800+$index+outerIndex*10000)">
                        <div class="mt10" ng-show="ChangeTJMSShow2=={{4800+$index+outerIndex*10000}}">
                            <input class="form-control" placeholder="请输入要修改的标题" ng-model="model2.DomainChartListIpTitle">
                        </div>
                    </div>
                    <div>
                        <div style=" height:300px; width: 100%" id="{{'D_QPChart'+($index+4200+outerIndex*10000)}}" ng-show="y.CharyType==3"></div>
                    </div>
                    <div ng-show="ChangeTJMSShow2!=(4800+$index+outerIndex*10000)">{{y.Description}}</div>
                    <div style="margin: 5px 30px 10px;" ng-show="ChangeTJMSShow2=={{4800+$index+outerIndex*10000}}">
                        <textarea class="form-control" rows="3" placeholder="请输入采集统计概览描述" ng-model="model2.LinkChartListIpDescription"></textarea>
                        <div id="caozuoBut">
                            <button type="button" class="btn btn-primary queren" ng-click="UpdateDomainChart(y._id)">修改</button>
                            <button type="button" class="btn btn-default quxiao" ng-click="ChangeTJMS2(0)">取消</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mb10 ">
            <div class="addMS" style="margin:20px;">
                <div class="nei_TJMS_nei" ng-click="XiugaiEditerFun(outerIndex+4100,null)" ng-show="keXiuGai && XiugaiEditer!=(outerIndex+4100)">
                    <i class="fa fa-plus-square mr5"></i>添加分析图表
                </div>
                <div class="nei_TJMS_no" ng-show="!keXiuGai && !x.ChartList.length<0" style="cursor: auto">
                    <i class="fa fa-plus-square "></i> 您尚未添分析模块
                </div>

                <div class="Xiugai  HoverActive" ng-if="XiugaiEditer==outerIndex+4100">
                    <div class="title_MS mt10">添加图表</div>
                    <div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">小标题：</label>
                            <input type="email" class="form-control" id="model420input" placeholder="请输入小标题">
                        </div>
                        <div class="tubiao_sle">
                            <div class="tubiaoZhanshi">
                                <div class="row">
                                    <div class="xuanze">
                                        <div class="xuanzeBut pr20 pl20" ng-show="chartType==0">
                                            <p>请选择需要图表：</p>
                                            <div class="row ">
                                                <div class="col-sm-0 col-lg-3"></div>
                                                <div class="col-lg-2  col-sm-4">
                                                    <div class="SelectChart" ng-click="selcetChart(x,1)">
                                                        <div class="tubiao">
                                                            <img src="Scripts/app/images/echartT/eChart1.png" alt="" />
                                                        </div>
                                                        <div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-2 col-sm-4">
                                                    <div class="SelectChart" ng-click="selcetChart(x,2)">
                                                        <div class="tubiao">
                                                            <img src="Scripts/app/images/echartT/eChart2.png" alt="" />
                                                        </div>
                                                        <div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-2 col-sm-4">
                                                    <div class="SelectChart" ng-click="selcetChart(x,3)">
                                                        <div class="tubiao">
                                                            <img src="Scripts/app/images/echartT/eChart3.png" alt="" />
                                                        </div>
                                                        <div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="margin: 10px auto 0px auto;" ng-show="chartType!=0">
                                        <div style="width:100%" ng-show="chartType==1||chartType==2">
                                            <div class="panel-body mt0 pt0">
                                                <div class="col-lg-2">
                                                    <div class="input-group">
                                                        <div class="input-group-addon">按Top前</div>
                                                        <input type="text" ng-model="data.topNum" class="form-control">
                                                    </div>
                                                </div>
                                                <div class="col-lg-3 col-md-4">
                                                    <div class="input-group">
                                                        <div class="input-group-addon">按超出百分比</div>
                                                        <input type="text" ng-model="data.percent" class="form-control">
                                                        <span class="input-group-addon">%</span>
                                                    </div>
                                                </div>
                                                <div class="col-lg-3 col-md-4">
                                                    <div class="input-group">
                                                        <div class="input-group-addon">间隔</div>
                                                        <select class="form-control" ng-init="selectedTime = timeOptions[0]" ng-model="selectedTime" ng-options="x.name for x in timeOptions"></select>
                                                    </div>
                                                </div>
                                                <div class="col-lg-2 col-md-4" ng-show="selectedTime.isShow">
                                                    <div class="input-group">
                                                        <input type="text" ng-model="selectedTime.value" class="form-control">
                                                        <span class="input-group-addon">天</span>
                                                    </div>
                                                </div>
                                                <div class="col-lg-2 col-md-6">
                                                    <button class="btn btn-tea" type="button" ng-click="D_lineChart(selectedTime.value,null)" style="color:#fff;">
                                                        筛选
                                                    </button>
                                                    <button class="btn btn-tea" type="button" ng-click="clearModel()" style="color:#fff;">
                                                        清除
                                                    </button>
                                                </div>
                                                <div class="col-lg-2 col-md-6" style=" text-align: right;">
                                                    <button class="btn btn-tea" type="button" ng-click="SaveChart_OT(selectedTime)" style="color:#fff;">
                                                        保存设置
                                                    </button>
                                                    <button class="btn btn-tea" type="button" ng-click="GetChart_OT()" style="color:#fff;">
                                                        读取设置
                                                    </button>
                                                </div>
                                            </div>
                                            <div style="width:100%">
                                                <div ng-show="chartType==1" style="width:100%">
                                                    <div style=" height: 290px; width:100%" id="D_lineChart_shai"></div>
                                                </div>
                                                <div ng-show="chartType==2" style="width:100%">
                                                    <div style=" height: 290px;width:100%" id="D_PieChart_shai"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-show="chartType==3">
                                            <div id="RP_GetBubbleList" style="width: 100%; height: 340px; text-align: center; overflow: hidden;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">内容：</label>
                            <textarea class="form-control" id="model421textare" rows="3" placeholder="请输入简述"></textarea>
                        </div>
                    </div>

                    <div class="MSBut">
                        <button type="button" class="btn btn-primary queren" ng-click="InsertLinkChart()" ng-show="chartType!=3">保存</button>
                        <button type="button" class="btn btn-primary queren" ng-click="InsertDomainChart()" ng-show="chartType==3">保存</button>
                        <button type="button" class="btn btn-default quxiao" ng-click="XiugaiEditerFun(0,null)">取消</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="addMS">
        <h5 ng-show="!(GetLinkChartCateData[0].Title) && XiugaiEditer!=1" style="font-weight:600;">添加分析图</h5>
        <div class="nei_TJMS" ng-click="XiugaiEditerFun(4,null)" ng-show="keXiuGai && XiugaiEditer!=4">
            <i class="fa fa-plus-square mr5"></i>添加分析模块
        </div>
        <div class="nei_TJMS_no" ng-show="!keXiuGai && !GetLinkChartCateData[0].Title" style="cursor: auto">
            <i class="fa fa-plus-square "></i> 您尚未添分析模块
        </div>
        <div class="Xiugai  HoverActive" ng-if="XiugaiEditer==4">
            <div class="title_MS mt10">添加报告描述</div>
            <div>
                <div class="form-group">
                    <label for="exampleInputEmail1">标题：</label>
                    <input type="email" class="form-control" id="model4input" placeholder="请输入小标题" ng-model="model2.ISLCtitle">
                </div>
                <div class="form-group">
                    <label for="exampleInputEmail1">内容：</label>
                </div>
            </div>
            <div class="inputMS" ng-include="'Scripts/app/views/Dashboard/Introduce/jQuery-edit/Modal1add.html'"></div>
            <div class="MSBut">
                <button type="button" class="btn btn-primary queren" ng-click="InsertLinkChartCate()">保存</button>
                <button type="button" class="btn btn-default quxiao" ng-click="XiugaiEditerFun(0,null)">取消</button>
            </div>
        </div>
    </div>


</div>
